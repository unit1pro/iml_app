<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
        <title>Tabbed Slide box</title>

        <!-- ionic css -->
        <link href="http://code.ionicframework.com/1.0.0-rc.4/css/ionic.css" rel="stylesheet">

        <!-- your app's css -->
        <link href="tabSlideBox.css" rel="stylesheet">
        <link rel="stylesheet" href="./front/css/bootstrap.min.css" type="text/css">
        <link rel="stylesheet" href="./front/font-awesome/css/font-awesome.css">
        <link rel="stylesheet" href="./front/css/style.css" type="text/css">
        <link rel="stylesheet" href="./front/css/flex.css" type="text/css">
        <link rel="stylesheet" href="./front/font-awesome/css/font-awesome.css">

        <!-- ionic/angularjs scripts -->
        <script src="http://code.ionicframework.com/1.0.0-rc.4/js/ionic.bundle.min.js"></script>

        <script src="tabSlideBox.js"></script>
        <script src="includes/jquery/dist/jquery.min.js"></script>
        <!--<script src="tabSlideBox.js"></script>-->

        <!-- your app's script -->
        <script>
//            var url = "http://indianmusiclab/index.php/Api";

            var app = angular.module('slidebox', ['ionic', 'tabSlideBox'])
                    .run(['$q', '$http', '$rootScope', '$location', '$window', '$timeout',
                            function($q, $http, $rootScope, $location, $window, $timeout){

                            $rootScope.$on("$locationChangeStart", function(event, next, current){
                            $rootScope.error = null;
                            console.log("Route change!!!", $location.path());
                            var path = $location.path();
                            console.log("App Loaded!!!");
                            });
                            }
                    ]);
            app.config(function($stateProvider, $urlRouterProvider) {
            $stateProvider.state('index', {
            url : '/',
                    templateUrl : 'index.html',
                    controller : 'IndexCtrl'
            });
            $urlRouterProvider.otherwise("/");
            });
            app.controller("IndexCtrl", ['$rootScope', "$scope", "$stateParams", "$q", "$location", "$window", '$timeout',
                    function($rootScope, $scope, $stateParams, $q, $location, $window, $timeout){
                    $scope.onSlideMove = function(data){
//                    alert("You have selected " + data.index + " tab");

                    get_data(data.index);
                    };
                    }
            ]);
        </script>



        <style>
            .slider-slide h3{
                color:#fff;
                margin-top:10px;
            }
            .scroll{
                height:100%;
            }

            .tabbed-slidebox .tsb-icons:after{
                display:none;
            }
            .bar .title.title-left {
                text-align: center;
            }
            .wrapper {padding-top:50%;height:0;position:relative;}
            .inner{position:absolute;left:0;top:0;right:0;bottom:0;}
            .post_views{
                background-color: #ffffff;
                color: #cccccc !important;
                font-size: 18px;
                padding: 8px 20px;
                text-align: left;
                border: 1px groove #8d8585;
                border-radius: 5px;
                box-shadow: 3px 4px 16px #ddd9d9;
                margin: 5px 0 1px 0!important;
            }
            .profile{display:inline-block;}
            .well{background-color: #546355;padding-left: 0px;}
            .form{background-color: rgba(173, 175, 173, 0.35);color: #fff;text-align: left;padding-left: 19px;}
        </style>

    </head>

    <body ng-app="slidebox" animation="slide-left-right-ios7">

    <ion-nav-bar class="nav-title-slide-ios7 bar-positive">
        <ion-nav-back-button class="button-icon ion-arrow-left-c">
        </ion-nav-back-button>
    </ion-nav-bar>

    <ion-nav-view ng-controller="IndexCtrl"></ion-nav-view>

    <script id="index.html" type="text/ng-template">
        <ion-view class="video-view" title="Indian Music Lab">
            <ion-content scroll="false">
                <tab-slide-box>
                    <ion-slide-box show-pager="false" on-slide-changed="slideHasChanged($index)">
                        <ion-slide>
                            <ion-scroll style="height:100%" delegate-handle="slide1Scroll" >
                                <div class=""><!-- 
                                    <div class="row"> -->
                                        <div id="update_profile">
                                            <div class="well form-container">
                                                <form class="form" id="update_profile_form">
                                                    <div class="form-group row">
                                                      <label for="profile_name" class="col-xs-4 col-form-label">Name</label>
                                                      <div class="col-xs-8">
                                                        <input class="form-control" type="text" value="Artisanal kale" id="profile_name">
                                                      </div>
                                                    </div>
                                                    <div class="form-group row">
                                                      <label for="profile_about" class="col-xs-4 col-form-label">About</label>
                                                       <div class="col-xs-8">
                                                        <textarea class="form-control" id="profile_about" rows="3"></textarea>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                      <label for="profile_dob" class="col-xs-4 col-form-label">Date of Birth</label>
                                                      <div class="col-xs-8">
                                                        <input class="form-control" type="text" value="Artisanal kale" id="profile_dob">
                                                      </div>
                                                    </div>
                                                    <div class="form-group row">
                                                      <label for="profile_city" class="col-xs-4 col-form-label">City</label>
                                                      <div class="col-xs-8">
                                                        <input class="form-control" type="text" value="Artisanal kale" id="profile_city">
                                                      </div>
                                                    </div>
                                                    <div class="form-group row">
                                                      <label for="profile_state" class="col-xs-4 col-form-label">State</label>
                                                      <div class="col-xs-8">
                                                        <input class="form-control" type="text" value="Artisanal kale" id="profile_state">
                                                      </div>
                                                    </div>
                                                    <div class="form-group row">
                                                      <label for="profile_country" class="col-xs-4 col-form-label">Country</label>
                                                      <div class="col-xs-8">
                                                        <input class="form-control" type="text" value="Artisanal kale" id="profile_country">
                                                      </div>
                                                    </div>
                                                    <div class="form-group"> 
                                                      <div class="col-xs-4">
                                                        <button type="reset" class="btn btn-default btn-xs">Reset</button>
                                                      </div>
                                                      <div class="col-xs-4">
                                                        <button type="submit" class="btn btn-primary btn-xs">Submit</button>
                                                      </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>

                                        <div id="account_settings">
                                            <div class="well form-container">
                                                <form class="form" id="account_settings_form">
                                                  <div class="form-group  row">
                                                    <label class="col-xs-4 col-form-label" for="email">Email:</label>
                                                    <div class="col-xs-8">
                                                      <input type="email" class="form-control" id="email" placeholder="Enter email">
                                                    </div>
                                                  </div>
                                                  <div class="form-group  row">
                                                    <label class="control-label col-xs-4" for="opwd">Old Password:</label>
                                                    <div class="col-xs-8"> 
                                                      <input type="password" class="form-control" id="opwd" placeholder="Enter password">
                                                    </div>
                                                  </div>
                                                  <div class="form-group  row">
                                                    <label class="control-label col-xs-4" for="pwd">New Password:</label>
                                                    <div class="col-xs-8"> 
                                                      <input type="password" class="form-control" id="pwd" placeholder="Enter password">
                                                    </div>
                                                  </div>
                                                  <div class="form-group row">
                                                    <label class="control-label col-xs-4" for="cpwd">Confirm Password:</label>
                                                    <div class="col-xs-8"> 
                                                      <input type="password" class="form-control" id="cpwd" placeholder="Enter password">
                                                    </div>
                                                  </div>
                                                  <div class="form-group row"> 
                                                    <div class="col-xs-offset-4 col-xs-4">
                                                      <button type="submit" class="btn btn-primary btn-xs">Submit</button>
                                                    </div>
                                                    <div class="col-xs-4">
                                                      <button type="reset" class="btn btn-info btn-xs">Reset</button>
                                                    </div>
                                                  </div>
                                                </form>
                                            </div>
                                        </div>

                                        <div id="profile_pic">
                                            <div class="well form-container">
                                                <form class="form"  id="profile_pic_form">
                                                  <div class="form-group row">
                                                    <input type="file" id="file" class="upload_file">
                                                    <span class="upload_span"></span>
                                                  </div>
                                                  
                                                  <div class="form-group row"> 
                                                    <div class="col-xs-offset-4 col-xs-4">
                                                      <button type="submit" class="btn btn-primary btn-xs">Submit</button>
                                                    </div>
                                                    <div class="col-xs-4">
                                                      <button type="reset" class="btn btn-info btn-xs">Reset</button>
                                                    </div>
                                                  </div>
                                                </form>
                                            </div>
                                        </div>
                                <!--     </div>
                                </div> -->
                            </ion-scroll>
                        </ion-slide>
                    </ion-slide>
                </ion-slide-box>
            </tab-slide-box>
        </ion-content>
    </ion-view>

    </script>

    <script src="front/js/jquery.js" type="text/javascript"></script>
    <script src="front/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="includes/js/custom.js" type="text/javascript"></script>
    <script>

    $(document).ready(function(){
        $('ion-header-bar').prepend('<a class="button back_button_show_hide buttons button-icon ion-arrow-left-c" href="index.html"></a>');
        var action = getQueryStringValue('action');
        $('.form-container').height($(window).height());
        $('.form-container').width($(window).width());

        function centerPlace(content){
            console.log($('#'+content));
            var winHeight = $(window).height();
            var contentHeight = $('#'+content).height();
            var remaningSpace = winHeight-contentHeight;
            var margin = (remaningSpace/2)-50;
            console.log(winHeight,contentHeight,remaningSpace,margin);
            $('#'+content).css('margin-top',margin+'px');
        }



        if(action == 'account'){
            $('#account_settings').show();
            $('#update_profile').hide();
            $('#profile_pic').hide();
            var profile_data;
            edit_profile(function(data){
                $.each(data.profile_data, function (index, profile) {
                    $('#email').val(profile.Email);
                });
            });
            centerPlace('account_settings_form');
        } else if( action == 'profile'){
            $('#account_settings').hide();
            $('#update_profile').show();
            $('#profile_pic').hide();
            var profile_data;
            edit_profile(function(data){
                $.each(data.profile_data, function (index, profile) {
                    $('#profile_name').val(profile.FirstName);
                    $('#profile_about').val(profile.AboutMe);
                    $('#profile_dob').val(profile.DOB);   
                    $('#profile_city').val(profile.City);       
                    $('#profile_state').val(profile.State);       
                    $('#profile_country').val(profile.Country);                    
                });
            });
            centerPlace('update_profile_form');
        } else {
            $('#account_settings').hide();
            $('#update_profile').hide();
            $('#profile_pic').show();
            centerPlace('profile_pic_form');
        }
    });
    </script>
</body>
</html>